let pokemonRepository=function(){let t=[];function e(e){"object"==typeof e&&"name"in e?t.push({name:e.name,detailsUrl:e.url}):console.log("Invalid Pokemon")}function n(t){let e=$(".pokemon-list"),n=$('<li class="list-group-item"></li>'),i=$('<button class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" id="showDetailsButton"></button>'),a=e.find("button:contains(${pokemon.name})");!a.length&&(i.text(t.name),i.click(function(){o(t)}),n.append(i),e.append(n))}function o(t){i(t).then(function(){let e=document.querySelector(".modal-title"),n=document.querySelector(".modal-body");e.innerHTML="<h1>"+t.name+"</h1>",n.innerHTML='<img class="modal-img" src="'+t.imageUrl+'"><p>Height: '+t.height/10+" m</p><p>Types: "+(t.types?t.types.join(", "):"")+"</p><p>Weight: "+t.weight/10+" kg</p>",$("#pokemonDetailModal").modal("toggle")})}function i(t){return fetch(t.detailsUrl,{mode:"cors"}).then(function(t){return t.json()}).then(function(e){t.imageUrl=e.sprites.front_default,t.height=e.height,t.weight=e.weight,t.types=e.types.map(function(t){return t.type.name})}).catch(function(t){console.error(t)})}return{getAll:function e(){return new Promise(function(e,n){setTimeout(function(){e(t)},2e3)})},add:e,addListItem:n,showDetails:o,loadList:function o(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150",{mode:"cors"}).then(function(t){return t.json()}).then(function(o){return o.results.forEach(function(t){let o={name:t.name,detailsUrl:t.url};e(o),n(o)}),t}).catch(function(t){throw Error("Failed to load pokemon list: "+t.message)})},loadDetails:i}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().then(function(t){t.forEach(function(t,e){pokemonRepository.addListItem(t),$("#"+e).attr("id",t.name)})})});